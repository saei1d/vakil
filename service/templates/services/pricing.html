{% extends 'base.html' %}
{% block title %}خدمات حقوقی تخصصی{% endblock %}
{% block style %}
    <style>
    .jdp-time-container.jdp-only-time .jdp-time:first-child {
    display: none !important;
    }

    .jdp-time-container.jdp-only-time .jdp-time:nth-child(2)::after {
    content: none !important;
    }

    .input-equal {
    height: 50px;
    }

    /* هاور سبز برای دکمه پرداخت */
    .btn-hover123:hover {
    background-color: green;
    }


    .form-header-call {
    position: relative;
    text-align: center;
    }

    .form-header-call hr {
    border: 2px solid #456e3c;
    opacity: 1;
    }

    .call-popup {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 90%;
    max-width: 600px;
    z-index: 1000;
    padding: 20px;
    border-radius: 8px;
    color: black !important;
    }



    .close-btn {
    cursor: pointer;
    color: red;
    float: right;
    font-size: 38px;
    }


    .overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 999;
    }
    h2{
    color:white;
    }

    .btn-open {
    cursor: pointer;
    }

    .jdp-container .jdp-time-container.jdp-only-time .jdp-time select {
        font-size: 1.5rem !important;
        padding: .8rem 1rem .8rem 7px !important;
        color: black !important;
    }

    .jdp-container {
        color: black !important;
    }
    </style>
{% endblock %}

{% block banner %}
    <div class="banner">
        <div class="text-center" style="padding-top: 150px;">
            <h2 class="text-light">
                {% if request.GET.source|slice:":box" %}
                    خدمات حقوقی تخصصی
                {% else %}
                    خدمات حقوقی
                {% endif %}
            </h2>
            <div class="mt-3 d-flex gap-2 text-gold justify-content-center">
                <i class="bi bi-house-fill"></i>
                <i class="bi bi-chevron-left"> </i>
                <span class="fw-light">خدمات حقوقی</span>
            </div>
        </div>
    </div>
{% endblock %}
{% block banner-mob %}
    <div class="banner">
        <div class="text-center" style="padding-top: 150px;">
            <h2>
                {% if request.GET.source|slice:":box" %}
                    خدمات حقوقی تخصصی
                {% else %}
                    خدمات حقوقی
                {% endif %}
            </h2>
            <div class="mt-3 d-flex gap-2 text-gold justify-content-center">
                <i class="bi bi-house-fill"></i>
                <i class="bi bi-chevron-left"> </i>
                <span class="fw-light">خدمات حقوقی</span>
            </div>
        </div>
    </div>
{% endblock %}

{% block content %}
    {% if request.GET.source == 'box-1' %}
        <div class="text-center p-4 border rounded shadow" style="background-color: #f9f9f9;">
            <h3 class="text-gold">دعاوی حقوقی</h3>
            <p class="text-muted" style="font-size: 1.1rem;">وکلای مجرب ما در دعاوی حقوقی آماده‌اند تا به شما در حل مشکلاتتان کمک کنند. با مشاوره‌های دقیق و راهکارهای عملی، شما را در دستیابی به حقوقتان یاری می‌کنیم. با ما تماس بگیرید و از خدمات ما بهره‌مند شوید.</p>
        </div>
    {% endif %}
        {% if request.GET.source == 'box-2' %}
        <div class="text-center p-4 border rounded shadow" style="background-color: #f9f9f9;">
            <h3 class="text-gold">امور اوقافی</h3>
                <p class="text-muted" style="font-size: 1.1rem;">وکلای ما در امور اوقافی با تجربه و دانش کافی آماده‌اند تا به شما در حل مسائل مربوط به وقف و مدیریت املاک وقف شده کمک کنند. با مشاوره‌های تخصصی ما، می‌توانید از حقوق خود در این زمینه به بهترین نحو دفاع کنید.</p>
            </div>
        {% endif %}
        
        {% if request.GET.source == 'box-3' %}
        <div class="text-center p-4 border rounded shadow" style="background-color: #f9f9f9;">
            <h3 class="text-gold">دفاع کیفری</h3>
                <p class="text-muted" style="font-size: 1.1rem;">وکلای متخصص ما در زمینه دفاع کیفری آماده‌اند تا از حقوق شما در برابر اتهامات کیفری دفاع کنند. با مشاوره‌های دقیق و استراتژی‌های قانونی، ما به شما کمک می‌کنیم تا بهترین نتیجه را در پرونده‌های کیفری خود به دست آورید.</p>
            </div>
        {% endif %}
        
        {% if request.GET.source == 'box-4' %}
        <div class="text-center p-4 border rounded shadow" style="background-color: #f9f9f9;">
            <h3 class="text-gold">امور ورشکستگی</h3>
                <p class="text-muted" style="font-size: 1.1rem;">اگر با مشکلات مالی مواجه هستید، وکلای ما در امور ورشکستگی می‌توانند به شما در مدیریت و حل این مسائل کمک کنند. با مشاوره‌های ما، می‌توانید راهکارهای مناسبی برای بازگشت به وضعیت مالی سالم پیدا کنید.</p>
            </div>
        {% endif %}
        
        {% if request.GET.source == 'box-5' %}
        <div class="text-center p-4 border rounded shadow" style="background-color: #f9f9f9;">
            <h3 class="text-gold">جبران خسارت</h3>
                <p class="text-muted" style="font-size: 1.1rem;">در صورت بروز خسارت، وکلای ما می‌توانند به شما در پیگیری حقوق خود و جبران خسارت‌های وارده کمک کنند. با مشاوره‌های ما، می‌توانید از حقوق خود به بهترین نحو دفاع کنید و خسارت‌های خود را دریافت نمایید.</p>
            </div>
        {% endif %}
    </div> 
    <!-- service -->
    <section class="service-section mt">
        <div class="container-2" style="z-index: 10;">
            <div class="service-2 ">
                <div class="bg-white box-servise position-relative text-center btn-open">
                    <i style="font-size: 40px" class="bi bi-telephone-inbound"></i>
                    <h5>مشاوره تلفنی با وکیل متخصص</h5>
                    <p style="font-size: 13px;">(پس از تکمیل فرم، <span
                            style="font-size:15px;font-weight: bold;"> کارشناسان ما </span> در اسرع وقت با شما تماس خواهند گرفت)</p>
                    <a href="#"
                       class="text-black btn-form position-absolute bottom-0 start-0 text-center p-2 bg-gold w-100">دریافت مشاوره</a>
                </div>

                <div class="overlay" id="overlay"></div>
                <div class="call-popup" id="call-popup">
                    <span style="margin-right: 15px" class="close-btn" id="close-btn">×</span>

                    <form class="p-4 bg-white shadow rounded" action="{% url "service:call" %}" method="post">
                        {% csrf_token %}

                        <!-- خط بالای فرم -->
                        <div class="form-header-call text-center position-relative mb-4">
                            <hr class="w-50 mx-auto">
                            <p class="position-absolute top-50 start-50 translate-middle bg-white px-2"
                               style="color: black; font-weight: bold;">مشاوره تخصصی با وکلای مجرب</p>
                        </div>

                        <div class="row">
                            <div class="pb-3">
                                <p style="font-size: 11px;place-self: center;">در صورت عدم استفاده از زمان رزرو شده، می‌توانید در روزهای آتی از آن بهره‌مند شوید</p>
                            </div>
                            <div class="col-md-6 mb-3">
                                <input type="text" id="date" style="color: black" class="form-control input-equal"
                                       data-jdp
                                       data-jdp-min-date="today" name="date" placeholder="انتخاب تاریخ مشاوره"/>
                            </div>

                            <!-- انتخاب ساعت تماس -->
                            <div class="col-md-6 mb-3">
                                <input type="text" id="time" name="clock" style="color: rgb(0, 0, 0) !important; background-color: #ffffff !important; border: 1px solid #d1a264; z-index: 10;"
                                       class="form-control input-equal"
                                       data-jdp data-jdp-only-time placeholder="انتخاب ساعت مشاوره"/>
                            </div>

                            <!-- انتخاب مدت زمان تماس -->
                            <div class="col-md-6 mb-3">
                                <select id="duration-call" name="duration" class="form-select input-equal"
                                        style="border-radius: 0;border: 1px solid #d1a264;">
                                    <option value="0">مدت زمان مشاوره</option>
                                    <option value="1">1 ساعت</option>
                                    <option value="2">2 ساعت</option>
                                    <option value="3">3 ساعت</option>
                                    <option value="4">4 ساعت</option>
                                    <option value="5">5 ساعت</option>
                                </select>
                            </div>

                            <!-- جمع فاکتور -->
                            <div class="col-md-6 mb-3">
                                <input type="text" id="total-call" style="color: black" class="form-control input-equal"
                                       readonly
                                       value="200,000 تومان">
                            </div>
                        </div>

                        <!-- دکمه پرداخت -->
                        <div class="text-center mt-4">
                            <button type="submit" class="btn btn-primary w-100 btn-hover123">پرداخت و رزرو مشاوره</button>
                        </div>
                    </form>
                </div>
<!-- 
                {############################################################################################################################}
                {############################################################################################################################}


                {############################################################################################################################} -->

                <div class="bg-white box-servise position-relative text-center btn-open-chat">
                    <i style="font-size: 40px" class="bi bi-chat-right-text"></i>
                    <h5>مشاوره آنلاین با وکیل</h5>
                    <p style="font-size: 13px;">پلتفرم اختصاصی گفتگو با <span
                            style="font-size:15px;font-weight: bold;"> امنیت بالا </span> و محرمانگی کامل</p>

                    <a href="#"
                       class="text-black btn-form position-absolute bottom-0 start-0 text-center p-2 bg-gold w-100">دریافت مشاوره</a>
                </div>

                <div class="overlay" id="chat-overlay"></div>
                <div class="call-popup" id="chat-popup">
                    <span style="margin-right: 15px" class="close-btn" id="chat-close-btn">×</span>
                    <form class="p-4 bg-white shadow rounded" action="{% url "service:payam" %}" method="post">
                        {% csrf_token %}

                        <div class="form-header-call text-center position-relative mb-4">
                            <hr class="w-50 mx-auto">
                            <p class="position-absolute top-50 start-50 translate-middle bg-white px-2"
                               style="color: black; font-weight: bold;">مشاوره آنلاین اختصاصی</p>
                        </div>

                        <div class="row">
                            <!-- انتخاب تاریخ -->
                            <div class="col-md-6 mb-3">
                                <input type="text" name="date" id="date-chat" style="color: black"
                                       class="form-control input-equal"
                                       data-jdp
                                       data-jdp-min-date="today" placeholder="تاریخ شروع مشاوره"/>
                            </div>


                            <!-- انتخاب مدت زمان تماس -->
                            <div class="col-md-6 mb-3">
                                <select id="duration-chat" name="duration" class="form-select input-equal"
                                        style="border-radius: 0;border: 1px solid #d1a264;">
                                    <option value="1">1 روز</option>
                                    <option value="3">3 روز</option>
                                    <option value="7">1 هفته</option>
                                </select>
                            </div>

                            <!-- جمع فاکتور -->
                            <div class="col-md-12 mb-3">
                                <input type="text" id="total-chat" style="color: black" class="form-control input-equal"
                                       readonly value="150,000 تومان">

                            </div>
                        </div>

                        <!-- دکمه پرداخت -->
                        <div class="text-center mt-4">
                            <button type="submit" class="btn btn-primary w-100 btn-hover123">پرداخت و فعال‌سازی مشاوره</button>
                        </div>

                    </form>
                </div>

                <!-- {############################################################################################################################}
                {############################################################################################################################}


                {############################################################################################################################} -->

                <div class="bg-white box-servise position-relative text-center btn-open-legal">
                    <i style="font-size: 40px" class="bi bi-file-richtext"></i>
                    <h5>تنظیم حرفه‌ای اسناد حقوقی</h5>
                    <p style="font-size: 13px;">تنظیم تخصصی دادخواست، لایحه، اظهارنامه و شکواییه توسط وکلای مجرب</p>
                    <a href="#"
                       class="text-black btn-form position-absolute bottom-0 start-0 text-center p-2 bg-gold w-100">درخواست تنظیم</a>
                </div>
                <div class="overlay" id="legal-overlay"></div>
                <div class="call-popup" id="legal-popup">
                    <span style="margin-right: 15px" class="close-btn" id="legal-close-btn">×</span>
                    <form class="p-4 bg-white shadow rounded" method="post" action="{% url "service:shekaiatname" %}">
                        {% csrf_token %}

                        <div class="form-header-call text-center position-relative mb-4">
                            <hr class="w-50 mx-auto">
                            <p class="position-absolute top-50 start-50 translate-middle bg-white px-2"
                               style="font-weight: bold;">تنظیم تخصصی اسناد حقوقی</p>
                        </div>
                        <p style="font-size: 13px">پس از ثبت درخواست، یک چت روم اختصاصی یک‌روزه برای شما فعال می‌شود تا بتوانید مدارک و اطلاعات تکمیلی را با وکیل متخصص به اشتراک بگذارید</p>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <select id="duration-chat" name="group" class="form-select input-equal"
                                        style="border-radius: 0;border: 1px solid #d1a264;">
                                    <option value="1">تنظیم لایحه دفاعیه</option>
                                    <option value="2">تنظیم دادخواست</option>
                                    <option value="3">تنظیم شکواییه</option>
                                    <option value="4">تنظیم اظهارنامه</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <input type="text" name="title" id="title-darkhast" style="color: black"
                                       class="form-control input-equal"
                                       placeholder="موضوع درخواست">
                            </div>
                            <div class="col-md-12 mb-3">
                            <textarea id="description_darkhast" name="description" style="color: black; height: 120px;"
                                      class="form-control input-equal"
                                      placeholder="شرح مختصری از موضوع و نیازمندی‌های خود را بنویسید"></textarea>

                            </div>
                        </div>

                        <div class="text-center mt-4">
                            <button type="submit" class="btn btn-primary w-100 btn-hover123">ارسال درخواست و بررسی توسط وکیل</button>
                        </div>
                    </form>
                </div>
                <!-- {############################################################################################################################}
                {############################################################################################################################}


                {############################################################################################################################} -->

                <div class="bg-white box-servise position-relative text-center btn-open-lawyer">
                    <i style="font-size: 40px" class="bi bi-person-check"></i>
                    <h5>وکیل پرونده اختصاصی</h5p>
                    <p style="font-size: 13px;">پیگیری تخصصی پرونده‌های حقوقی به صورت حضوری و غیرحضوری در سراسر کشور</p>
                    <a href="#"
                       class="text-black btn-form position-absolute bottom-0 start-0 text-center p-2 bg-gold w-100">درخواست وکیل</a>
                </div>
                <div class="overlay" id="lawyer-overlay"></div>
                <div class="call-popup" id="lawyer-popup">
                    <span style="margin-right: 15px" class="close-btn" id="lawyer-close-btn">×</span>
                    <form class="p-4 bg-white shadow rounded" method="post" action="{% url "service:ekhtesasi" %}">
                        {% csrf_token %}
                        <div class="form-header-call text-center position-relative mb-4">
                            <hr class="w-50 mx-auto">
                            <p class="position-absolute top-50 start-50 translate-middle bg-white px-2"
                               style="color: black; font-weight: bold;">وکیل اختصاصی پرونده</p>
                        </div>
                        <p style="font-size: 13px">پیگیری تخصصی تمامی امور حقوقی و حضور در جلسات دادگاه توسط وکلای مجرب و متخصص</p>
                        <div class="row mt-3">
                            <div class="col-md-6 mb-2">
                                <select id="duration-ekhtesasi" name="duration" class="form-select input-equal"
                                        style="border-radius: 0;border: 1px solid #d1a264;">
                                    <option value="7">1 هفته</option>
                                    <option value="30">1 ماه</option>
                                    <option value="180">6 ماه</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-2">
                                <input type="text" id="date-ekhtesasi" name="date" style="color: black"
                                       class="form-control input-equal"
                                       data-jdp
                                       data-jdp-min-date="today" placeholder="تاریخ شروع همکاری"/>
                            </div>
                        </div>
                        <!-- اینجا فیلدهای فرم وکیل اختصاصی اضافه کنید -->
                        <div class="text-center mt-4">
                            <button type="submit" class="btn btn-primary w-100 btn-hover123">ثبت درخواست و هماهنگی با وکیل</button>
                        </div>
                    </form>
                </div>


            </div>
        </div>
    </section>

<!--team vokala-->
<Section>
    <div class="container mt-5 ">
        <div class="row justify-content-between  p-md-5 p-3 se">
            <!-- info contect -->
            <div class="col-md-7 text-md-start text-center  p-md-5 p-3"
                 style="background-color: #182615; border-bottom: 5px solid #BC945C;">
                <div class="contact-info">
                    {% load static %}
                    <img src="{% static "image/icon1.png" %}" alt="">

                    <h2 class="mt-4" style="font-size: 40px;">تیم وکلای متخصص و کارآزموده
                        <br>
                        راهکارهای حقوقی برای پیروزی شما
                    </h2>
                    <p class="my-4 col-md-8">
                        ما معتقدیم هر موکل با مشکلات منحصر به فرد خود، شایسته توجه ویژه و راهکارهای تخصصی است. تیم حقوقی ما متشکل از وکلای مجرب با سال‌ها تجربه در زمینه‌های مختلف حقوقی، آماده ارائه خدمات حرفه‌ای و پیگیری دقیق پرونده‌های شما هستند. ما با تکیه بر دانش حقوقی روزآمد و رویکرد موکل‌محور، در کنار شما برای احقاق حق ایستاده‌ایم.
                    </p>

                    <div class="row align-items-center mt-5 gap-5">
                        <div
                                class="d-flex align-items-center gap-3 justify-content-md-start justify-content-center">
                            <img src="{% static "image/supporter.png" %}" width="50px" alt="">
                            <div>
                                <p class="text-gold mb-2">تماس اضطراری</p>
                                <p>۰۲۵-۳۲۷۰۵۱۹۹</p>
                            </div>
                        </div>
                        <div
                                class="d-flex align-items-center gap-3 justify-content-md-start justify-content-center">
                            <img src="{% static "image/clock.png" %}" width="50px" alt="">
                            <div>
                                <p class="text-gold mb-2">ساعات پاسخگویی</p>
                                <h6> ۲۴/۷ در دسترس</h6>
                            </div>
                        </div>
                    </div>


                </div>
            </div>
            <!-- form contect -->
            <div class="col-md-4 mt-md-0 mt-5 bg-befor position-relative ">
                <img src="{% static "image/serviceimage.jpg" %}" width="100%"
                     style="border-bottom: 5px solid #BC945C;" alt="">
            </div>


        </div>


    </div>
</Section>
<!--team vokala-->

    <!-- faq -->
    <section>
        <div class="container-2 mt2">
            <div class="text-center">
                <h2> سؤالات متداول حقوقی </h2>
                <p class="fs-14 my-3 text-gold">
                    پاسخ به پرسش‌های رایج شما
                    <br>
                    توسط کارشناسان حقوقی ما
                </p>
            </div>
            <div class="accordion mt-5 w-50 mx-auto">
                <div class="accordion-item-2">
                    <div class="accordion-header d-flex justify-content-between align-items-center"
                         onclick="toggleAccordion(this)"> هزینه مشاوره حقوقی چقدر است؟<i class="bi bi-chevron-down"></i>
                    </div>
                    <div class="accordion-body">
                        هزینه مشاوره حقوقی بسته به نوع پرونده، پیچیدگی آن و زمان مورد نیاز متفاوت است. برای دریافت مشاوره اولیه رایگان می‌توانید با شماره دفتر تماس بگیرید تا کارشناسان ما شما را راهنمایی کنند.
                    </div>
                </div>
                <div class="accordion-item-2">
                    <div class="accordion-header d-flex justify-content-between align-items-center"
                         onclick="toggleAccordion(this)">چه مدارکی برای شروع پرونده حقوقی نیاز است؟<i class="bi bi-chevron-down"></i></div>
                    <div class="accordion-body">
                        مدارک مورد نیاز بسته به نوع پرونده متفاوت است. به طور کلی، مدارک هویتی، اسناد مالکیت، قراردادها، مکاتبات قبلی و هرگونه مدرک مرتبط با موضوع پرونده مورد نیاز خواهد بود. در جلسه مشاوره اولیه، وکیل شما لیست دقیق مدارک مورد نیاز را به شما اعلام خواهد کرد.
                    </div>
                </div>
                <div class="accordion-item-2">
                    <div class="accordion-header d-flex justify-content-between align-items-center"
                         onclick="toggleAccordion(this)">مدت زمان رسیدگی به پرونده‌های حقوقی چقدر است؟<i class="bi bi-chevron-down"></i></div>
                    <div class="accordion-body">
                        زمان رسیدگی به پرونده‌های حقوقی بسته به نوع دعوی، پیچیدگی موضوع و حجم کاری دادگاه‌ها متفاوت است. برخی پرونده‌ها ممکن است در چند ماه به نتیجه برسند، در حالی که پرونده‌های پیچیده‌تر ممکن است بیش از یک سال زمان ببرند. تیم حقوقی ما تلاش می‌کند با پیگیری مستمر، روند رسیدگی به پرونده شما را تسریع کند.
                    </div>
                </div>
                <!-- تکرار سایر آیتم‌ها -->
            </div>


        </div>
    </section>
    <!-- faq -->

{% endblock %}
{% block script %}
<script>
    {% if messages %}
        document.addEventListener('DOMContentLoaded', function() {
            {% for message in messages %}
                Swal.fire({
                    title: 'اطلاعیه',
                    text: '{{ message|escapejs }}',
                    icon: 'info',
                    confirmButtonText: 'باشه'
                }).then(() => {}); // اضافه کردن then برای جلوگیری از خطای Expression expected
            {% endfor %}
        });
    {% endif %}
    // Accordion
    const headers = document.querySelectorAll('.accordion-header');
    if (headers) {
    document.addEventListener('DOMContentLoaded', function () {

    headers.forEach(header => {
    header.addEventListener('click', function () {
    const body = this.nextElementSibling;
    body.classList.toggle('active');

    headers.forEach(otherHeader => {
    if (otherHeader !== this) {
    otherHeader.nextElementSibling.classList.remove('active');
    }
    });
    });
    });
    });

    }
    function handlePopup() {

    jalaliDatepicker.startWatch({
    minDate: "today"  // اینجا حداقل تاریخ انتخابی از امروز تنظیم می‌شود
    });
    const callBtn = document.querySelector('.btn-open'); // دکمه تماس
    const chatBtn = document.querySelector('.btn-open-chat'); // دکمه چت
    const legalBtn = document.querySelector('.btn-open-legal'); // دکمه تنظیم اوراق
    const lawyerBtn = document.querySelector('.btn-open-lawyer'); // دکمه وکیل اختصاصی

    const overlay = document.getElementById('overlay');
    const chatOverlay = document.getElementById('chat-overlay');
    const legalOverlay = document.getElementById('legal-overlay');
    const lawyerOverlay = document.getElementById('lawyer-overlay');

    const callPopup = document.getElementById('call-popup');
    const chatPopup = document.getElementById('chat-popup');
    const legalPopup = document.getElementById('legal-popup');
    const lawyerPopup = document.getElementById('lawyer-popup');

    const closeBtn = document.getElementById('close-btn');
    const chatCloseBtn = document.getElementById('chat-close-btn');
    const legalCloseBtn = document.getElementById('legal-close-btn');
    const lawyerCloseBtn = document.getElementById('lawyer-close-btn');

    // باز کردن پاپ آپ‌ها
    if (callBtn) {
    callBtn.addEventListener('click', () => {
    overlay.style.display = 'block';
    callPopup.style.display = 'block';
    });
    }

    if (chatBtn) {
    chatBtn.addEventListener('click', () => {
    chatOverlay.style.display = 'block';
    chatPopup.style.display = 'block';
    });
    }

    if (legalBtn) {
    legalBtn.addEventListener('click', () => {
    legalOverlay.style.display = 'block';
    legalPopup.style.display = 'block';
    });
    }

    if (lawyerBtn) {
    lawyerBtn.addEventListener('click', () => {
    lawyerOverlay.style.display = 'block';
    lawyerPopup.style.display = 'block';
    });
    }

    // بستن پاپ آپ‌ها
    if (closeBtn) {
    closeBtn.addEventListener('click', () => {
    overlay.style.display = 'none';
    callPopup.style.display = 'none';
    });
    }

    if (chatCloseBtn) {
    chatCloseBtn.addEventListener('click', () => {
    chatOverlay.style.display = 'none';
    chatPopup.style.display = 'none';
    });
    }

    if (legalCloseBtn) {
    legalCloseBtn.addEventListener('click', () => {
    legalOverlay.style.display = 'none';
    legalPopup.style.display = 'none';
    });
    }

    if (lawyerCloseBtn) {
    lawyerCloseBtn.addEventListener('click', () => {
    lawyerOverlay.style.display = 'none';
    lawyerPopup.style.display = 'none';
    });
    }
    }

    // اجرای اسکریپت بعد از لود شدن کامل صفحه
    document.addEventListener('DOMContentLoaded', handlePopup);


    // Execute function when DOM is fully loaded
    document.addEventListener('DOMContentLoaded', handlePopup);
    document.getElementById('duration-call').addEventListener('change', function () {
    const duration = parseInt(this.value);
    const pricePerHour = 200000;
    const total = duration * pricePerHour;
    document.getElementById('total-call').value = total.toLocaleString() + ' تومان';
    });
    $(document).ready(function () {
    // پیکربندی انتخابگر زمان
    $('#time').persianDatepicker({
    onlyTimePicker: true, // فقط ساعت و دقیقه
    timePicker: {
    enabled: true,
    hour: {
    step: 1
    },
    minute: {
    step: 1
    },
    second: {
    enabled: false // حذف ثانیه‌ها
    }
    },
    onSelect: function () {

    $(this).val();
    }
    });



    // تغییر رنگ اعداد به مشکی
    $('#time').on('focus', function () {
    $('.datepicker-time').css('color', 'black');
    });
    });


    document.addEventListener('DOMContentLoaded', function () {
    console.log('صفحه به طور کامل بارگذاری شد');

    // دکمه‌ای که پاپ‌آپ را باز می‌کند
    const chatPopupButton = document.querySelector('.btn-open-chat');
    console.log('دکمه پاپ‌آپ چت پیدا شد:', chatPopupButton);

    if (chatPopupButton) {
    chatPopupButton.addEventListener('click', function () {
    console.log('روی دکمه چت کلیک شد، پاپ‌آپ باز می‌شود');

    // اضافه کردن تاخیر کوتاه برای اطمینان از اینکه پاپ‌آپ کاملاً لود شده است
    setTimeout(function () {
    console.log('در حال بررسی عناصر پاپ‌آپ بعد از باز شدن...');

    // یافتن عناصر فرم در پاپ‌آپ
    const durationChat = document.getElementById('duration-chat');
    const totalChat = document.getElementById('total-chat');

    console.log('durationChat عنصر:', durationChat);
    console.log('totalChat عنصر:', totalChat);

    if (durationChat && totalChat) {
    console.log('عناصر durationChat و totalChat پیدا شدند. آماده افزودن listener.');

    // اضافه کردن listener برای تغییرات در durationChat
    durationChat.addEventListener('change', function () {
    const duration = this.value; // مقدار انتخاب شده را دریافت می‌کنیم
    console.log('مدت زمان انتخاب شده:', duration);

    let total = 150000; // مقدار پیش‌فرض

    // محاسبه قیمت بر اساس مدت زمان انتخاب شده
    if (duration === "1") {
    total = 150000;
    } else if (duration === "3") {
    total = 300000;
    } else if (duration === "7") {
    total = 500000;
    }

    console.log('قیمت محاسبه شده:', total);

    // به‌روزرسانی فیلد totalChat
    totalChat.value = total.toLocaleString() + ' تومان';
    });
    } else {
    console.log('عناصر durationChat یا totalChat پیدا نشدند.');
    }
    }, 100); // تاخیر کوتاه
    });
    } else {
    console.log('دکمه چت پیدا نشد!');
    }
    });





    // لاگین ریکوعایرد کردن
    document.getElementById("date").addEventListener("click", function () {
    fetch("/check-auth/") // مسیر بررسی وضعیت کاربر
    .then(response => response.json())
    .then(data => {
    if (!data.authenticated) {
    const currentUrl = window.location.pathname + window.location.search; // مسیر فعلی
    window.location.href = `/login/?next=${encodeURIComponent(currentUrl)}`;
    }
    })
    .catch(error => console.error("Error:", error));
    });
    document.getElementById("title-darkhast").addEventListener("click", function () {
    fetch("/check-auth/") // مسیر بررسی وضعیت کاربر
    .then(response => response.json())
    .then(data => {
    if (!data.authenticated) {
    const currentUrl = window.location.pathname + window.location.search; // مسیر فعلی
    window.location.href = `/login/?next=${encodeURIComponent(currentUrl)}`;
    }
    })
    .catch(error => console.error("Error:", error));
    });
    document.getElementById("date-chat").addEventListener("click", function () {
    fetch("/check-auth/") // مسیر بررسی وضعیت کاربر
    .then(response => response.json())
    .then(data => {
    if (!data.authenticated) {
    const currentUrl = window.location.pathname + window.location.search; // مسیر فعلی
    window.location.href = `/login/?next=${encodeURIComponent(currentUrl)}`;
    }
    })
    .catch(error => console.error("Error:", error));
    });
    document.getElementById("date-ekhtesasi").addEventListener("click", function () {
    fetch("/check-auth/") // مسیر بررسی وضعیت کاربر
    .then(response => response.json())
    .then(data => {
    if (!data.authenticated) {
    const currentUrl = window.location.pathname + window.location.search; // مسیر فعلی
    window.location.href = `/login/?next=${encodeURIComponent(currentUrl)}`;
    }
    })
    .catch(error => console.error("Error:", error));
    });



    
</script>
{% endblock %}